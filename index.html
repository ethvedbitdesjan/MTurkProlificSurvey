<!DOCTYPE html>
<html>
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <title>Funny Image Rating Survey</title>
  <h1> Funny Image Rating Survey</h1>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 20px;
    }

    #image-container {
      text-align: center;
      margin-bottom: 20px;
    }

    #rating-container {
      text-align: center;
    }

    #rating-buttons {
      margin-top: 10px;
    }

    #welcome {
      text-align: center;
      /*add css tags for a welcome page*/
      margin: 20px;
      font-size: 2em;
      font-family: sans-serif;
    }
    
    .rating-button {
      margin: 3px;
      color: yellow;
      background-color: blue;
      border-radius: 5px;
      text-align: center;
      padding: 5px;
      font-size: 0.8em;
    }

    #start-button {
      margin-top: 20px;
      color: yellow;
      background-color: blue;
      border-radius: 10px;
      text-align: center;
      padding: 10px;
      font-size: 1.5em;
      font-family: Arial;
    }

    #start-demographic-info {
      text-align: center;
      margin: 5px;
    }

    #demogr-title {
      font-size: 1.8em;
      font-family: Arial;
      color: blue;
    }

    .prompt {
      text-align: center;
      margin: 10px;
      font-size: 1.6em;
      font-family: Arial;
      color: blue;
      font-style: bold;
    }

    .value {
      text-align: center;
      font-size: 1.2em;
      font-family: sans-serif;
      color: black;
      margin: 5px;
    }

    #demogr-submit {
      margin-top: 20px;
      color: yellow;
      background-color: blue;
      border-radius: 10px;
      text-align: center;
      padding: 10px;
      font-size: 1.5em;
      font-family: Arial;
    }

    #processing-message {
      text-align: center;
      margin: 10px;
      font-size: 1.2em;
      font-family: sans-serif;
      color: blue;
    }

    button:active {
      background-color: yellow;
      color: blue;
    }
  </style>
</head>
<body>
  <div id="welcome">
    <p> Welcome to the Funny Image Rating Survey! </p>
    <p> Please rate the funniness of the images below on a scale of 1 to 10. (1 being not funny and 10 being very funny)</p>
    <p> The time required to rate all the images is 20-23 minutes</p>
    <p> Only click on the rating buttons once, and wait till the next image loads(maximum 1 second), a message will show you when the next image is being processed.</p>
    <p> Please do not refresh the page. You will lose progress and will have to start again. </p>
    <p> There are 250 images in this survey</p>
    <p> At the end of the survey, we will provide you a code, please store it and use it appropriately to get the reward.</p>
    <p> Click the button below to begin. </p>
    <button class="start-button" value="1" id="start-button"> Let's Start</button>
  </div>
  <div id="start-demographic-info" style="display: none;">
    <p id="demogr-title" class="demogr-title">Demograhic Information</p>
    <p id="error-missing-message" style="display: none; color: red; font-size: large;">Please fill out all the fields.</p>
    <div>
      <p id="demogr-age" class="prompt">Age: <input type="number" id="age" name="age" min="18" max="120" value="25" class="value"></p>
    </div>
    <div>
      <p id="demogr-gender" class="prompt">Gender</p>
      <select name="gender" class="value">
        <option value="male"> Male </option>
        <option value="female"> Female </option>
        <option value="non-binary"> Non-binary </option>
      </select>
    </div>
    <div>
      <p id="demogr-nationality" class="prompt"> Nationality </p>
      <select name="nationality" class="value">
        <option value="">-- select one --</option>
        <option value="afghan">Afghan</option>
        <option value="albanian">Albanian</option>
        <option value="algerian">Algerian</option>
        <option value="american">American</option>
        <option value="andorran">Andorran</option>
        <option value="angolan">Angolan</option>
        <option value="antiguans">Antiguans</option>
        <option value="argentinean">Argentinean</option>
        <option value="armenian">Armenian</option>
        <option value="australian">Australian</option>
        <option value="austrian">Austrian</option>
        <option value="azerbaijani">Azerbaijani</option>
        <option value="bahamian">Bahamian</option>
        <option value="bahraini">Bahraini</option>
        <option value="bangladeshi">Bangladeshi</option>
        <option value="barbadian">Barbadian</option>
        <option value="barbudans">Barbudans</option>
        <option value="batswana">Batswana</option>
        <option value="belarusian">Belarusian</option>
        <option value="belgian">Belgian</option>
        <option value="belizean">Belizean</option>
        <option value="beninese">Beninese</option>
        <option value="bhutanese">Bhutanese</option>
        <option value="bolivian">Bolivian</option>
        <option value="bosnian">Bosnian</option>
        <option value="brazilian">Brazilian</option>
        <option value="british">British</option>
        <option value="bruneian">Bruneian</option>
        <option value="bulgarian">Bulgarian</option>
        <option value="burkinabe">Burkinabe</option>
        <option value="burmese">Burmese</option>
        <option value="burundian">Burundian</option>
        <option value="cambodian">Cambodian</option>
        <option value="cameroonian">Cameroonian</option>
        <option value="canadian">Canadian</option>
        <option value="cape verdean">Cape Verdean</option>
        <option value="central african">Central African</option>
        <option value="chadian">Chadian</option>
        <option value="chilean">Chilean</option>
        <option value="chinese">Chinese</option>
        <option value="colombian">Colombian</option>
        <option value="comoran">Comoran</option>
        <option value="congolese">Congolese</option>
        <option value="costa rican">Costa Rican</option>
        <option value="croatian">Croatian</option>
        <option value="cuban">Cuban</option>
        <option value="cypriot">Cypriot</option>
        <option value="czech">Czech</option>
        <option value="danish">Danish</option>
        <option value="djibouti">Djibouti</option>
        <option value="dominican">Dominican</option>
        <option value="dutch">Dutch</option>
        <option value="east timorese">East Timorese</option>
        <option value="ecuadorean">Ecuadorean</option>
        <option value="egyptian">Egyptian</option>
        <option value="emirian">Emirian</option>
        <option value="equatorial guinean">Equatorial Guinean</option>
        <option value="eritrean">Eritrean</option>
        <option value="estonian">Estonian</option>
        <option value="ethiopian">Ethiopian</option>
        <option value="fijian">Fijian</option>
        <option value="filipino">Filipino</option>
        <option value="finnish">Finnish</option>
        <option value="french">French</option>
        <option value="gabonese">Gabonese</option>
        <option value="gambian">Gambian</option>
        <option value="georgian">Georgian</option>
        <option value="german">German</option>
        <option value="ghanaian">Ghanaian</option>
        <option value="greek">Greek</option>
        <option value="grenadian">Grenadian</option>
        <option value="guatemalan">Guatemalan</option>
        <option value="guinea-bissauan">Guinea-Bissauan</option>
        <option value="guinean">Guinean</option>
        <option value="guyanese">Guyanese</option>
        <option value="haitian">Haitian</option>
        <option value="herzegovinian">Herzegovinian</option>
        <option value="honduran">Honduran</option>
        <option value="hungarian">Hungarian</option>
        <option value="icelander">Icelander</option>
        <option value="indian">Indian</option>
        <option value="indonesian">Indonesian</option>
        <option value="iranian">Iranian</option>
        <option value="iraqi">Iraqi</option>
        <option value="irish">Irish</option>
        <option value="israeli">Israeli</option>
        <option value="italian">Italian</option>
        <option value="ivorian">Ivorian</option>
        <option value="jamaican">Jamaican</option>
        <option value="japanese">Japanese</option>
        <option value="jordanian">Jordanian</option>
        <option value="kazakhstani">Kazakhstani</option>
        <option value="kenyan">Kenyan</option>
        <option value="kittian and nevisian">Kittian and Nevisian</option>
        <option value="kuwaiti">Kuwaiti</option>
        <option value="kyrgyz">Kyrgyz</option>
        <option value="laotian">Laotian</option>
        <option value="latvian">Latvian</option>
        <option value="lebanese">Lebanese</option>
        <option value="liberian">Liberian</option>
        <option value="libyan">Libyan</option>
        <option value="liechtensteiner">Liechtensteiner</option>
        <option value="lithuanian">Lithuanian</option>
        <option value="luxembourger">Luxembourger</option>
        <option value="macedonian">Macedonian</option>
        <option value="malagasy">Malagasy</option>
        <option value="malawian">Malawian</option>
        <option value="malaysian">Malaysian</option>
        <option value="maldivan">Maldivan</option>
        <option value="malian">Malian</option>
        <option value="maltese">Maltese</option>
        <option value="marshallese">Marshallese</option>
        <option value="mauritanian">Mauritanian</option>
        <option value="mauritian">Mauritian</option>
        <option value="mexican">Mexican</option>
        <option value="micronesian">Micronesian</option>
        <option value="moldovan">Moldovan</option>
        <option value="monacan">Monacan</option>
        <option value="mongolian">Mongolian</option>
        <option value="moroccan">Moroccan</option>
        <option value="mosotho">Mosotho</option>
        <option value="motswana">Motswana</option>
        <option value="mozambican">Mozambican</option>
        <option value="namibian">Namibian</option>
        <option value="nauruan">Nauruan</option>
        <option value="nepalese">Nepalese</option>
        <option value="new zealander">New Zealander</option>
        <option value="ni-vanuatu">Ni-Vanuatu</option>
        <option value="nicaraguan">Nicaraguan</option>
        <option value="nigerien">Nigerien</option>
        <option value="north korean">North Korean</option>
        <option value="northern irish">Northern Irish</option>
        <option value="norwegian">Norwegian</option>
        <option value="omani">Omani</option>
        <option value="pakistani">Pakistani</option>
        <option value="palauan">Palauan</option>
        <option value="panamanian">Panamanian</option>
        <option value="papua new guinean">Papua New Guinean</option>
        <option value="paraguayan">Paraguayan</option>
        <option value="peruvian">Peruvian</option>
        <option value="polish">Polish</option>
        <option value="portuguese">Portuguese</option>
        <option value="qatari">Qatari</option>
        <option value="romanian">Romanian</option>
        <option value="russian">Russian</option>
        <option value="rwandan">Rwandan</option>
        <option value="saint lucian">Saint Lucian</option>
        <option value="salvadoran">Salvadoran</option>
        <option value="samoan">Samoan</option>
        <option value="san marinese">San Marinese</option>
        <option value="sao tomean">Sao Tomean</option>
        <option value="saudi">Saudi</option>
        <option value="scottish">Scottish</option>
        <option value="senegalese">Senegalese</option>
        <option value="serbian">Serbian</option>
        <option value="seychellois">Seychellois</option>
        <option value="sierra leonean">Sierra Leonean</option>
        <option value="singaporean">Singaporean</option>
        <option value="slovakian">Slovakian</option>
        <option value="slovenian">Slovenian</option>
        <option value="solomon islander">Solomon Islander</option>
        <option value="somali">Somali</option>
        <option value="south african">South African</option>
        <option value="south korean">South Korean</option>
        <option value="spanish">Spanish</option>
        <option value="sri lankan">Sri Lankan</option>
        <option value="sudanese">Sudanese</option>
        <option value="surinamer">Surinamer</option>
        <option value="swazi">Swazi</option>
        <option value="swedish">Swedish</option>
        <option value="swiss">Swiss</option>
        <option value="syrian">Syrian</option>
        <option value="taiwanese">Taiwanese</option>
        <option value="tajik">Tajik</option>
        <option value="tanzanian">Tanzanian</option>
        <option value="thai">Thai</option>
        <option value="togolese">Togolese</option>
        <option value="tongan">Tongan</option>
        <option value="trinidadian or tobagonian">Trinidadian or Tobagonian</option>
        <option value="tunisian">Tunisian</option>
        <option value="turkish">Turkish</option>
        <option value="tuvaluan">Tuvaluan</option>
        <option value="ugandan">Ugandan</option>
        <option value="ukrainian">Ukrainian</option>
        <option value="uruguayan">Uruguayan</option>
        <option value="uzbekistani">Uzbekistani</option>
        <option value="venezuelan">Venezuelan</option>
        <option value="vietnamese">Vietnamese</option>
        <option value="welsh">Welsh</option>
        <option value="yemenite">Yemenite</option>
        <option value="zambian">Zambian</option>
        <option value="zimbabwean">Zimbabwean</option>
      </select>
    </div>
    <div>
      <p name="demogr-education" class="prompt">Education Level (In-progress or latest completed)</p>
      <select name="education" class="value">
      <option value="high_school">High School</option>
      <option value="undergraduate">Undergraduate</option>
      <option value="postgraduate">Postgraduate</option>
      </select>
    </div>
    <button type="demogr-submit" value="1" id="demogr-submit"> Submit </button>
  </div>
  <div id="image-container" style="display: none;">
    <img id="image" src="" alt="Image" height="300">
  </div>

  <div id="processing-message" style="display: none;">
    <p>Processing...Please Wait and Do Not Click any Ratings Buttons</p>
  </div>

  <div id="rating-container" style="display: none;">
    <p>How funny is the image?</p>
    <div style="display: flex; flex-direction: row; text-align: center; justify-content: center;">
      <p style="width: 100px;">Not Funny</p>
      <div id="rating-buttons">
        <button class="rating-button" value="1">1</button>
        <button class="rating-button" value="2">2</button>
        <button class="rating-button" value="3">3</button>
        <button class="rating-button" value="4">4</button>
        <button class="rating-button" value="5">5</button>
        <button class="rating-button" value="6">6</button>
        <button class="rating-button" value="7">7</button>
        <button class="rating-button" value="8">8</button>
        <button class="rating-button" value="9">9</button>
        <button class="rating-button" value="10">10</button>
      </div>
      <p style="width: 100px;"> Very Funny </p>
    </div>
  </div>
  <div id="thanks" style="display: none;">
    <p>Thank you for your time!</p>
  </div>

  <script>
    var imageUrls = [];
    var group = 0;
    var allImageUrls = [];
    $.ajax({
      async: false,
      url: "https://ytgbbx4ihs4axjbynqgc6pbnou0cjzuc.lambda-url.us-east-1.on.aws/",
      type: "GET",
      success: function(data) {
        // Do something with the data
        group = data;
      },
      error: function(error) {
        // Handle the error
        console.log(error);
      }
    });
    $.ajax({
      async: false,
      url: "https://raw.githubusercontent.com/ethvedbitdesjan/MTurkProlificSurvey/master/Links/GdriveLinks.txt",
      type: "GET",
      success: function(data) {
        // Do something with the data
        allImageUrls = data.split("\n");
      },
      error: function(error) {
        // Handle the error
        console.log(error);
      }
    });

    console.log(allImageUrls.length);
    var images_per_hit = 50;
    const num_groups = Math.floor(allImageUrls.length / images_per_hit);
    var start_idx = Math.min(group * images_per_hit, allImageUrls.length);
    var end_idx = Math.min((group + 1) * images_per_hit, allImageUrls.length);
    start_idx = 0;
    end_idx = 225;
    imageUrls = ['1n6GbBRHGXKdXIw2Ja5mzvH_oo5v61geu',
'1RNjTcNVPXsbzblZIRjjIGVgZbhnM5TUB',
'1nUTblNiNeIZxU_31RRyCej5B2eb_714k',
'1WMJ0S2EBsu6CjxASr50M4DJP3404eHzB',
'13QrptLkuWW4VvMmbsaJLhjlLtMDy6UHI',
'1zPGfhLojTiVEmWtdTYzSf1OyKub173aJ',
'1qRNKHRM4s9vUiDzvNHn7Bb7yD3rAwKGZ',
'1rt4TtUSZr3OPlpMhd02D4Y0aujYYy9Ld',
'1gX-zia2snhlQfpLv-efzjFkuHaO30hdL',
'1l9iPpKhANq8-mu2tuzO2z7uyddqWWKW9',
'1U3n8-HwzjiCl0IU4Ud-w7-N6gr3ezYas',
'1kkpnfwarXwprzR8b3wxn3zhM-LYSMT8F',
'1TAumJYH9qZEm7I5ljR9mGKxIxZEGYQ73',
'1-CLzjofTNrQf3iF-v1U8qGQQgEm_jGEK',
'18wVcP-Glu8LYCEYttqD4Tcbw47syiYoV',
'1S2cnHjlOHyjeNoELPVAhFzM3hDkbMM0B',
'1ONt_ZGTC_7XosDBIqmk8gg01vuxp3N4O',
'1FkEMc9uUgOUUbEojDtbgRzNsVPGmHgO1',
'1ash5jswzqk57y-Qy98-xvitgTTKLQhCm',
'1mKcxCumRNqXQQ8QpRaooiZW03KPSeHG2',
'1XYEq_Via_4pdaVTarDGi0yDFFwLPc5EM',
'1yreedXC17S7PiWmonCk-0cuSjmSfQ_CX',
'1zgk9NS7LYBV1RETIcvyT3T_xUE8TDsd-',
'1aGndKYWQ1ILRGQ2OLLjPUYh-rIpTNtUg',
'1z1IsqHxZiB0obP9ll2GwPaosjBDs9Lf3',
'1nW1CLe6NMSSNjdojyJxwSrNxV56Ambi6',
'1rm0tZsaMfJcggRzrcozdfNaPUy7wHBcw',
'1241wHnT0dRVRRqMxuiaStDKxxCMVtbsH',
'1c_uB2xKtXX63g4x1ysm3cFL-b3eA91dB',
'1EFoSCb51HqT5UYCj3z1x4AqZqJWJppDX',
'1cspvxSAfBlRgEnup_VhDkLXfT9wRSmh-',
'1Ymflb_n9zrpFgjUDV6P4qUoAAZriTwaV',
'1XZ7nnHQlU8ooi497UqI1EejAzyMHIkLO',
'165Ue0GMgYgqkK2dEwW37GS4XIXOhsMMo',
'15TY_3zTEJ2j2ZWSLqfgj7Mo6bkasw50r',
'142YJirJOovRYj76CrZeAYxJ7s9tBHL_y',
'1ims-h2xhTbiwlmRR_bheuOpLNWUR2u7p',
'1wQgCL4nGksi6gr8V02yw9YG6w9XnMmSb',
'1URSibyOqTYkVCuzzluW8FYYYstMhwUs3',
'1R8KTuhJcQLaItlHKUulr68bT-AclnKXW',
'1Z5IFhw4DRD7MLGZnlRoQzH1VGo4j73ms',
'1Iub7lU4pgJLWgWePZQiSNWSZ7v3f0VZl',
'1yw8_DoUmPRnaPOsUDy41k7BF260gi336',
'1sBWWdpp67eRCV6xXBhbjEG0X4PP5lqfm',
'1oAJKwMsBy_1sa8YslGT2hntX2Wwh8TMG',
'1Sq--Rw-If01JE7a5rdXcu3yu80e_HmVm',
'1AlmUo8qSkQl-UsbHnFznbSq-hUGALfJF',
'1dAwe7t9lMhY8--eUrXXZMXuJVCSllv7I',
'1ZuHsETcSrbNjiiqrKvMwO_kNulju_rFv',
'17w5IHSbHD7WZZuAJ7ffgITiugKut6g5c',
'1B_bLSROJcooaO47UwHz_hioESKo3bdWP',
'1wali9f-DE-AG38PgGzUmlcdNvBnksNlS',
'1SwLksTTWLx2a-4rFEaurRGRdFuvjwc7c',
'1JRuJ3Qj-1IPqlny1vsqZQm9O4rLRlMon',
'1bU28JasAEwIUgFkf4_C25NzTaoLLBr27',
'1SWpODMnQCfSxuB7l8NaGhE3R87bVqiEK',
'1qiXzUU6Q17s9IkQChD-Nx-BNiayWp9-7',
'16VcTGGhV0UCpzzeVA6488vPAh6IE1ARt',
'1zhA0YgHySbKHoJ5Lm4vqxyCoi47LmJcQ',
'1FxC2EZQD4FjDRPmH1UZI40-Wgyq8K5gA',
'1dXMGrzPWz_SETN4knSc1GlIGw5UbxA84',
'1egPLUS1Fepw5WE2Jy5NaH13lq7SvvS9i',
'1eQZCNm9p_PwuDzJzZrfdO1oAZXTTxSES',
'1AqbtBWrGYGjy4WIZSiE28BUuVEWLe0LV',
'1MC9Fsk9SibHIcrf94_o44zElUswl8eli',
'1JliEIR_BK3TDLHngvCmMTZ9lAQb86scb',
'1EUmfyD5oV7OxMNrjQYTZTojZExGskqw9',
'1wq3vvl48JXA_5e7HbhEebhZG8es6IiSH',
'1agF9FzLwLog2jtvLAdwH4Lr28Btgty_3',
'1Cp-3t_fzQjGO6-2ii3L-Di-6zv_U6e4_',
'1p1DpvqspIT4QIMtY8L5poS_aUWga8Y41',
'10hly-xPm4Ps5bDrU5hgCufjecn_Tl84O',
'12NgUouBhxkRAefy615ie5Jp_BId7yD0Y',
'17Yli5w7FIp2FoCjksQ80rt6ie8seVLd3',
'1I6Ejbepk-NG_2FVwgiY-W6HYWOiETELx',
'1Tnz-0iSuIih6U4kKKNIYghmxasbwoRSl',
'12bpLd_WTG58YWDJwf9O6zQMrNu4dZnq9',
'1I6a1EpzBRuHDPX4YyJRiaECtNUtsMF96',
'1nf6IjB3Dpa6L_ZFVp80RpyyiC_8wi4dF',
'1y4mN-_is4QXeFCw8wmccredsFBYbt-O8',
'1Upoolj4i6RRGlkPF_wSRFRovJ4tZMX-a',
'1e3lnY4kKCWGzWXPSoaJXbwqpg3SLCxnO',
'1J7LlWHMyXygPRID5K4bXnrnwaU6cwA7u',
'1V_unpzk4V5PQNu7o-lsZthJ2PqSIsZP8',
'17R2tjUUX43EbB_fIIyGIHZIq8RtjhpXB',
'1rh7q7p92vVmRtXzM4ejOL5qhoZJTMT9S',
'1TQb3oSUdnVXwznvxUiu1jJWUrIqL5QF-',
'1mE2eHAv7_f3X2YOx-OWqQwgzSGek1Q9f',
'10_qKMvlBJZ83S-prgi3KXfEyCiEePLwm',
'1aQwJmUX5_lkBDRY_XMoS3damA5hnmu03',
'1CUtDwNoO1NGpfpmW1xlZTtvv48Lmbtcg',
'102v3irtx2C6FIehkdxS1Edy8tWBd_k5X',
'1FvISaowX8cFe9xzBq_thnETLBJG7GTcf',
'1PM4vHL3LPlITxPDAzOltaLuaC0l921WD',
'1OVL-6OSDAOeJVl3_wrttyVgJEie76QDM',
'1_SM9M4YNySeZKAuClftcI3_UuumULFOM',
'1MyfvSK2UYT53-Uxgx5QbGPEXN_5qyNyl',
'1bqL-q1oXYP6JBljN0Aw-rkbYI0DgzXG7',
'1xp2KPsFCvYE14F8YLnbo8ievEbhfOVpp',
'1B9M1Qa9cHUTYi83tVbI6gJFWrC4w980f',
'1oDii4kdgkK2UxNAc4KSCi9mRzoZDBE7H',
'1XqoRQdj7Fa8nvVppdUvaGHz3CQ_SiQFl',
'1FSnVpnHLM8b0BOu-fYgWAmWd_0cVnMh8',
'1g7wCweIiUY1KryyFroB07_aOZN_LxfnE',
'1a9pdKvFgJehUP8I7jd62jc9Inoko3meJ',
'1RABejMXVvTs0movZbra6CcnpDeBPoGti',
'1Px8qR0735tXuXUTZ4zggtVuommzuzHpB',
'1FvI6krBFmezc_QyfxbJd8zN63acUCT_Y',
'1X7sZ2FxDOpge89im8WSHYEaT6EEAOyc4',
'1Mw6Bq1ky95ZUIxOaMmqAAi-6dkcy2Mmw',
'13O5l4D-KMXF3gWERaqrEM3GGsowpuB-_',
'1MoOJLvwj7UKImioPO67bDJeRKqYypSP0',
'1X35AL5X3XEPEmkiPcs93Z723knmLrm9G',
'15PQ-naOshAHMkOVO2xXxqAaE1oGSwxW0',
'1RVh9ql-xkKnA2zNJrxCX642VFtMMX0d-',
'1UsKUrABTQSWN-IYs2Ls0CDFvnhY1ndBi',
'1jVA1NeZiUl_imj8Ib0zdqwvueNigCYH6',
'1-ZOik2EZeQfe8INAeioyFAj5jwxjlCBT',
'1ML9-EdXvBSBK3np9PoYUAxDP_VJ7kBvG',
'15W_a5Mf44RAZUuEHyf1ob_nkz6Scw2NA',
'1lDkpT1dTqyqlFg8RlmNxwUm7oDRnx2w7',
'1kzCGlWlZglZHQBtsS8G1G1cLF_opnoS4',
'1v3lYq_yWwrxdzNj3rCiQ9Xp2afeCWO37',
'1U4hybv7TnwAtdjZ8INboHrwmCVSzvx5i',
'1JTkLAUPc6VI9uA8H3Iy-L4Qi6ET4_ItU',
'1eEzxWnlkwYPn7enHt32wLDmgJN840eqD',
'1UAPyw2sgDGwQZ6QG2gr7H0W0Ikxruutq',
'1z4BhHRJnTsQ34th7DBVaZbRtelzjMDzP',
'1bzsbLpE4yxl2qFGUr8b6DPoTQKHglLvm',
'1zM8OzpTmyIl-J5EsfZbmWnBVunw22Poj',
'15OY_3qjpdTFY1oLTkfCvI-ZDQQRe68oo',
'1gSEa79_FrIB0eVIlg2V2ssrnOPlHxjkm',
'1qJkrnMjIFXcco_ShfS_WFWVLcoFtl_V-',
'1T9Eivmy0h21c3vvGDHW6a-VfN0rj5nap',
'1HiOFDpcN9Zbf29gQjqHzygNdjzJb8wXk',
'11avx1I3h3wff4PaDdBY8lQoZbXZqEdTU',
'1eTPXU71QnBh8Q4U8L2C1iuGOpvW8p_ZT',
'1-NPbB0b2s7rTCfDwz26XMa7VwGX5QUQF',
'18opXxe7QnLJM_7Orre2OikCojReER8pT',
'1x9bMPYOzoxunctP1U_roEtAAHk6g9NKL',
'1S4-Whj67mdHuQ_4HLgLx3jMk8fPxBQIk',
'13AwBN_O6D-59P44oyChpLlxHSwJtYwV3',
'1VnEJZ17Y09ZbRSCEaUGwyIaQMhe8NzC-',
'1IYWz4MJ9hGvVH-HjgGTxBMb8UkK_pnZB',
'1D3ZrKkofheVMXmWiBQkSbSzX66JRzsL8',
'1rbgpM3mnD-Sl_srICw2-Uj7eyfZso5Ug',
'1icaMVOKR2vAjm4AEp_6kmGI0qbdpa-90',
'1rBl48eucB47mXl6KdgIwuu4q3uRNkd-4',
'1I9jTiHH6iuTZpPF_SxI7VQZIQwFW2mop',
'1miU-_N68TVWIX-cxsFDQbd_phNO5qRAb',
'1OcA5BnN-BA0Nf0IU-S_cnA7N4OC25uXW',
'10flMbeiERvCiEOiadkEWh4CYqrU6sp3O',
'1nbJSp-1tIcku8mQYf2-GT0Q9I8NTS1Cg',
'1iBUK1hirKmAm1s3oZy0zju2GeNhpv82O',
'1TUY2mbh4DUuNGaCZUOKv7ojhxcmZ7ecp',
'1vxHR5hWEg_7eKfoTjd2Jmc4IeU6VqbBP',
'1qHrEdRnECnzJmDqH-xHLX2-D5kCG866J',
'1laJdOoBuxXfaUVXzFi9YBKPPjIyWTWz5',
'1jzyRtiKckXr6ydZqwJU13gmunu3v9fvt',
'1fwqVPfcFP7sd9TRbM-sJ9ZVA75A5KCkI',
'1a9IlQpjtHPQ_IU0GqsxIN13V0YMG5dzg',
'1XveACfxtU_zfydiHwxrqfRYCBjsuVqax',
'15ZQ4n_c-u1mpHHB1Gn0fgBG6ZQQYI7yW',
'1lPDNlTpxnF4uIgBpRaQ17pDEGp1eHs_v',
'1OZu181KmwS53rfs0vIRpSc00hu4wfPSe',
'1Drkn_WNJoXQwf2c_Amjp4Kkm2pHK35r7',
'1H6k2mbIZy8Txwc-qUVnpDZU6-odxpnS6',
'1_lB0Tt0edw6KXGj1fk4hJ3_WVz8ZqYui',
'1pTeDmatu2xlM9KGFgM2PmGH5TB6_vOTb',
'10SBKYGVspAypXEazzxHNA7m1Ys0bGYPn',
'1wKkGN868H_ELLFmpIXrVeEvSPyiYjl5s',
'176_70d95ssOIUXQooXzaY4qZljCjtkt3',
'1fD-sRX3J7xpHNOAOdoD5bPzAS84pXyPd',
'1WRiDIw8NcOb5NSlQnQ8PPz3uRwyhPq_c',
'1auoEM5sDgEiKcQcrisboWxu7wrpcUyXK',
'1kDV4xM6tVA2G20tOd9UoWdqSpjlWsqnD',
'1siUTBNjUN7krdsDV08qpxe-AELfSs7gi',
'1skrNaDlqoVSCR414JXNVON6N9YcGjPlk',
'1e0y0qv_MczSYrkCwmwea73FVFenc-BW_',
'1I29SyzuPywM4P-rWOf5nxDz72DMb5ci6',
'1iVjyywNgJplsWz7pMA4Hsrciwrrmr11y',
'14V6Ddz2mmiBWBP-pwqeqbfRKbtXEFih3',
'1KwYikVysX0bzwDq_vIomwNnADS4WyG8G',
'1Rz7YRR05QXnluYeYFgDC4bZvJGf8J3Tn',
'1_U9jCtIuCLLu6mtLIUHa5gMCIjcsScUO',
'18yuMCqONPpSgqenzs_COuOZSAMd7esuJ',
'1x-40ha67ZbnoPSN5q9prwS5Uha4RAWJf',
'1zMxqUnepHWtrjbVBdmatQEz_i97JkzDS',
'1L8HdvVscxT0iDYYgd5u8Wq5M62nAipyN',
'16uVg-ulCpN-Zcdm6kPsjIX7zjuTLRLLQ',
'1Brr-nfawKpoXMeY-N9Uv9gtIAjovjCl3',
'1CaNdphXL8rRFfMP9NIiKoEKbHo6NfBOs',
'1KIeSwjvex2A2DLlbd1HscbB3KIuw5uNQ',
'1D8U03Zr1cCYguxByzwmHZcwqZrLNTIBe',
'16wPexU1k1gawTapYujjvVIwfc7BSr_fV',
'1Q1jm9iKQX-mYIr3dhqzFTmPTMcBVjT1y',
'1QbBVHBj0FTJIGB-cmjuqqk9A7yN2KDc9',
'1flSl-szcswgU6sI8LZ5haRtEJjQ2674R',
'1ygS3ef6ftyvLTH8Q1lp6J0A3C95dw1fp',
'1bA_x4FBGXYJsj-6xSfZ2LoEjoFnuighi',
'1NTyDFlk2SkymKG-pce3Q4vhOfxRj07Nk',
'1-9nExw3VzqpS67daqK82hSyxAnyQ9Vqs',
'1GYJ5saTuIrT-vY755TYc1yOclDOOBSWU',
'1MPj03IheBTUn3bIcnaRcPFoNqYpys4j5',
'1iHhgldcdG_WJDWuKjyjAfK2yMKjH18sX',
'1kQCKkGzg7GY7GhlraD731i7QtWmC9UVa',
'1cWcgPvK1x99EsH5LtEeYpXK7_Afz4rRo',
'1LKbLdP3RIAVXnoRaCY07xTWgxPgotKKb',
'1FJQDMj3OeAW7LW6mUwXykQzhEa8Wf0ZT',
'1Wgnbw5lHVwwuKfuus5FqM416Slx3biFE',
'1zARL6BL4OV-rwCJCsMQv7iCkQgSTNBeo',
'1demYEK-ysm8DTfYDPdwykcecfMef4zeL',
'1SdpR6-IA2LJC1vH6KDH6VbAKf6m_MRp4',
'1DxquZZ-9JVI7r_qpYxRBvHn5MmzxfXTr',
'1Xy8F5aWtTYJpvw9URBiOjOlDKhT_p7Pe',
'14V0iazx1_RUNAbdoR634nSa4GXZDIcSC',
'1KR-JH1VlXLKLVuf9f26N3NNRXxWK5Pi2',
'15i6qhoaDnbtYBnXzq0RYJA0zrxxFwQZh',
'1pqiPhSBSCO1ydwhLaQDGbMs4DUKD53ud',
'1-U8ci3EbNBkq6XkHQ9AYpoGXPbPk1NqW',
'1kxgVCsIMNbRo7CFsXAp3Xa3Pvq2wujL6',
'1-tp8DNjf5S1VBrd2MQH_eJ_O0MG8boox',
'1AyCbj9c6U_cYCGoNFZ_otAYsa3fva_Zd',
'1KN_JPK8aNTU5AOlBSZWI4lYzkHhSDEK1',
'12UARB93dNMWxU4Ac9ZFDpIs2fSpIOiYA'];
    console.log(imageUrls.length);
    images_per_hit = 200;
    if (imageUrls.length < images_per_hit) {
      console.log("adding images");
      var num_extra = images_per_hit - imageUrls.length;
      for (let i = 0; i < num_extra; i++) {
        var random_idx = (Math.floor(Math.random() * (allImageUrls.length - imageUrls.length)));
        imageUrls.push(allImageUrls[random_idx]);
      }
    }

    var image_len = imageUrls.length;
    for (let i = 0; i < Math.floor(0.1 * image_len); i++) {
      var random_idx = (Math.floor(Math.random() * image_len));
      imageUrls.push(imageUrls[random_idx]);
    }
    console.log(group);
    console.log(imageUrls.length);
    //console.log(imageUrls);

    // async function getUrls() {
    //   let response = await fetch('https://raw.githubusercontent.com/ethvedbitdesjan/MTurkProlificSurvey/master/Links/GdriveLinks.txt');
    //   let data = await response.text();
    //   return data;
    // }
    // getUrls().then(data => {
    //   allImageUrls = data.split("\n");
    //   console.log(allImageUrls.length);
    // });
    

    var imageIndex = 0;
    var startTime = 0;
    var rating = 0;
    var ratings_list = [];
    var demographics = {};
    var image = document.getElementById('image');
    var ratingButtons = document.getElementsByClassName('rating-button');
    var img = new Image();
    img.onload = function() {
      image.src = this.src;
      var processing_message = document.getElementById('processing-message');
      processing_message.innerHTML = 'Continue';
      processing_message.style.display = 'block';
    };
    var processing_message = document.getElementById('processing-message');
    function displayImage() {
      processing_message.innerHTML = 'Processing...Please Wait and Do Not Click any Ratings Buttons';
      processing_message.style.display = 'block';
      img.src =  'https://drive.google.com/uc?export=view&id=' + imageUrls[imageIndex];
      startTime = new Date().getTime();
    }

    function recordRating(buttonValue) {
      rating = buttonValue;
      ratings_list.push([imageUrls[imageIndex], rating]);
      if (imageIndex < imageUrls.length - 1) {
        imageIndex++;
        displayImage();
      } else {
        // Submit the rating or perform any desired action
        console.log('Rating:', rating);
        var rating_container = document.getElementById('rating-container');
        if (rating_container.style.display === 'none') {
          rating_container.style.display = 'block';
        } else {
          rating_container.style.display = 'none';
        }
        var image_container = document.getElementById('image-container');
        if (image_container.style.display === 'none') {
          image_container.style.display = 'block';
        } else {
          image_container.style.display = 'none';
        }
        var thanks = document.getElementById('thanks');
        if (thanks.style.display === 'none') {
          thanks.style.display = 'block';
        } else {
          thanks.style.display = 'none';
        }
        var code = (Math.random() * 100000000).toFixed(0);
        thanks.getElementsByTagName('p')[0].innerHTML += ' Your code is ' + code;
        var url = 'https://5qdyuhwrhusr533dxdujc36qjm0odfvi.lambda-url.us-east-1.on.aws/';
        var data = {
          'code': code,
          'ratings': ratings_list,
          'demographics': demographics
        };
        fetch(url, {'body':JSON.stringify(data), 'method':'POST', 'mode':'no-cors'})
        .then(function (response) {
          console.log('sent');
        })
        .catch(function (error) {
          console.log("Error: " + error);
        });
        return;
      }
    }

    // Add event listeners to rating buttons
    for (var i = 0; i < ratingButtons.length; i++) {
      ratingButtons[i].addEventListener('click', function() {
        var buttonValue = parseInt(this.value);
        recordRating(buttonValue);
      });
    }
    
    var start_button = document.getElementsByClassName('start-button')[0];
    start_button.addEventListener('click', function() {
      var welcome = document.getElementById('welcome');
      if (welcome.style.display === 'none') {
        welcome.style.display = 'block';
      } else {
        welcome.style.display = 'none';
      }
      console.log(welcome.style.display);
      var start_demogr = document.getElementById('start-demographic-info');
      if (start_demogr.style.display === 'none') {
        start_demogr.style.display = 'block';
      } else {
        start_demogr.style.display = 'none';
      }
      console.log(imageUrls.length);
    });

    var demogr_submit = document.getElementById('demogr-submit');
    demogr_submit.addEventListener('click', function() {
      var age = document.getElementsByName('age')[0].value;
      var gender = document.getElementsByName('gender')[0].value;
      var nationality = document.getElementsByName('nationality')[0].value;
      var education = document.getElementsByName('education')[0].value;
      var error_missing_message = document.getElementById('error-missing-message');
      if (gender === undefined || education === undefined || nationality === undefined || nationality === "") {
        error_missing_message.style.display = 'block';
        console.log('error');
        return;
      }
      var start_demogr = document.getElementById('start-demographic-info');
      start_demogr.style.display = 'none';
      error_missing_message.style.display = 'none';
      demographics['age'] = age;
      demographics['gender'] = gender;
      demographics['nationality'] = nationality;
      demographics['education'] = education;
      var rating_container = document.getElementById('rating-container');
      console.log(rating_container.style.display);
      if (rating_container.style.display === 'none') {
        rating_container.style.display = 'block';
        console.log(rating_container.style.display);
      } else {
        rating_container.style.display = 'none';
      }
      var image_container = document.getElementById('image-container');
      if (image_container.style.display === 'none') {
        image_container.style.display = 'block';
      } else {
        image_container.style.display = 'none';
      }
      console.log(imageUrls.length);
      displayImage();
      var processing_message = document.getElementById('processing-message');
      if (processing_message.style.display === 'none') {
        processing_message.style.display = 'block';
      } else {
        processing_message.style.display = 'none';
      }
    });
    // Set minimum question answering time (2 seconds)
    setTimeout(function() {
      if (rating === 0) {
        // Do something if the user hasn't provided a rating
      }
    }, 2000);

    // Initial image display
    //displayImage();
  </script>
</body>
</html>
